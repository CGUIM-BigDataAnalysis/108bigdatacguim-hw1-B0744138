108-2 大數據分析方法 作業一
================
張伯豪

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
（107年）<https://data.gov.tw/dataset/6647>
（104-105年）<http://ipgod.nchc.org.tw/dataset/a17000000j-020066>
，可初步了解台灣近幾年各行各業、各學歷的起薪。

# 比較104年度和107年度大學畢業者的薪資資料

### 資料匯入與處理

在開始前輸入encoding = “UTF-8”，可使編譯環境為UTF-8，以免中文出現亂碼

``` r
library(jsonlite)
library(dplyr)
```

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

``` r
library(readr)
library(data.table)
```

    ## 
    ## Attaching package: 'data.table'

    ## The following objects are masked from 'package:dplyr':
    ## 
    ##     between, first, last

``` r
#載入104年的資料
S104 <- read_csv("C:/Users/USER/Desktop/RProject/104profession.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   `經常性薪資-薪資` = col_double(),
    ##   `經常性薪資-女/男` = col_character(),
    ##   `國中及以下-薪資` = col_character(),
    ##   `國中及以下-女/男` = col_character(),
    ##   `高中或高職-薪資` = col_character(),
    ##   `高中或高職-女/男` = col_character(),
    ##   `專科-薪資` = col_character(),
    ##   `專科-女/男` = col_character(),
    ##   `大學-薪資` = col_character(),
    ##   `大學-女/男` = col_character(),
    ##   `研究所及以上-薪資` = col_character(),
    ##   `研究所及以上-女/男` = col_character()
    ## )

``` r
#載入107年的資料
S107 <- read_csv("C:/Users/USER/Desktop/RProject/107profession.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   `經常性薪資-薪資` = col_character(),
    ##   `經常性薪資-女/男` = col_character(),
    ##   `國中及以下-薪資` = col_character(),
    ##   `國中及以下-女/男` = col_character(),
    ##   `高中或高職-薪資` = col_character(),
    ##   `高中或高職-女/男` = col_character(),
    ##   `專科-薪資` = col_character(),
    ##   `專科-女/男` = col_character(),
    ##   `大學-薪資` = col_character(),
    ##   `大學-女/男` = col_character(),
    ##   `研究所-薪資` = col_character(),
    ##   `研究所-女/男` = col_character()
    ## )

### Ans\_1資料整合

``` r
#首先在整合資料之前，必須先把104年和107年的資料欄位調成一致
colnames(S104) <- gsub('及以上', '' ,colnames(S104))
#接著把兩個資料表以"大職業別"合併，並將其存進S_total這個變數裡
S_total <- merge(x = S104, y = S107, by = "大職業別")
#由於104、107年的欄位名稱相同，R會自動在名稱後加.x .y 做為區分。
#為方便觀看我將.x改為104
colnames(S_total) <- gsub('x', '104' ,colnames(S_total))
#為方便觀看我將.y改為104
colnames(S_total) <- gsub('y', '107' ,colnames(S_total))

Ans_1 <- S_total%>%
  select(`大職業別`,`大學-薪資.104`, `大學-薪資.107`)%>%  #select將待會要用的資料取出
  subset(`大學-薪資.107` != "—")%>%                     #subset會把資料中的"-"拿掉
  mutate(`大學-薪資.107` = as.numeric(`大學-薪資.107`),  #mutate則是將欄位內的資料轉成數值
         `大學-薪資.104` = as.numeric(`大學-薪資.104`))
```

### 107年度薪資較104年度薪資高的職業有哪些?

取出Ans\_1來用，並在最後把資料存回Ans\_1\_a<br>
mutate將107/104大學-薪資，算出的數值會存進`成長率`欄位<br/>
arrange則是將`成長率`欄位進行排序(desc()為由大到小)<br/>

``` r
Ans_1_a <- Ans_1%>%
  mutate(`成長率` = Ans_1$`大學-薪資.107`/Ans_1$`大學-薪資.104`)%>%
  filter(`大學-薪資.107`>`大學-薪資.104`) %>%
  arrange(desc(成長率))
knitr::kable(head(Ans_1_a,10))
```

| 大職業別                   | 大學-薪資.104 | 大學-薪資.107 |   成長率    |
| :--------------------- | :-------: | :-------: | :------: |
| 專業\_科學及技術服務業-服務及銷售工作人員 |   24423   |   28304   | 1.158908 |
| 教育業-服務及銷售工作人員          |   24324   |   27543   | 1.132338 |
| 不動產業-技術員及助理專業人員        |   27338   |   30914   | 1.130807 |
| 住宿及餐飲業-服務及銷售工作人員       |   23548   |   26111   | 1.108842 |
| 藝術\_娛樂及休閒服務業-事務支援人員    |   24244   |   26611   | 1.097632 |
| 金融及保險業-技藝\_機械設備操作及組裝人員 |   30074   |   32997   | 1.097194 |
| 教育業                    |   25162   |   27582   | 1.096177 |
| 教育業-事務支援人員             |   23643   |   25908   | 1.095800 |
| 用水供應及污染整治業-專業人員        |   32179   |   34957   | 1.086330 |
| 教育業-專業人員               |   26615   |   28911   | 1.086267 |

### 提高超過5%的的職業有哪些?

取出Ans\_1\_a來用，並在最後把資料存回Ans\_1\_b<br> filter將取出`成長率`5%的欄位

``` r
Ans_1_b <- Ans_1_a %>%
  filter(成長率 >1.05)%>%
  select(`大職業別`,成長率)%>%
  arrange(desc(成長率))

Ans_1_b
```

    ##                                                   大職業別   成長率
    ## 1                 專業_科學及技術服務業-服務及銷售工作人員 1.158908
    ## 2                                教育業-服務及銷售工作人員 1.132338
    ## 3                            不動產業-技術員及助理專業人員 1.130807
    ## 4                          住宿及餐飲業-服務及銷售工作人員 1.108842
    ## 5                       藝術_娛樂及休閒服務業-事務支援人員 1.097632
    ## 6                 金融及保險業-技藝_機械設備操作及組裝人員 1.097194
    ## 7                                                   教育業 1.096177
    ## 8                                      教育業-事務支援人員 1.095800
    ## 9                            用水供應及污染整治業-專業人員 1.086330
    ## 10                                         教育業-專業人員 1.086267
    ## 11             出版、影音製作、傳播及資通訊服務業-專業人員 1.082141
    ## 12                                            住宿及餐飲業 1.081297
    ## 13        用水供應及污染整治業-技藝_機械設備操作及組裝人員 1.072507
    ## 14                             營建工程-服務及銷售工作人員 1.071877
    ## 15            電力及燃氣供應業-技藝_機械設備操作及組裝人員 1.071044
    ## 16                               住宿及餐飲業-事務支援人員 1.070685
    ## 17                       運輸及倉儲業-技術員及助理專業人員 1.070003
    ## 18                               服務業-服務及銷售工作人員 1.069120
    ## 19                       金融及保險業-技術員及助理專業人員 1.069093
    ## 20                         金融及保險業-服務及銷售工作人員 1.068089
    ## 21         出版、影音製作、傳播及資通訊服務業-事務支援人員 1.067475
    ## 22                         工業及服務業-服務及銷售工作人員 1.066587
    ## 23                                                不動產業 1.066421
    ## 24                運輸及倉儲業-技藝_機械設備操作及組裝人員 1.065723
    ## 25                    不動產業-技藝_機械設備操作及組裝人員 1.063403
    ## 26                住宿及餐飲業-技藝_機械設備操作及組裝人員 1.062300
    ## 27                             不動產業-服務及銷售工作人員 1.062117
    ## 28                           支援服務業-服務及銷售工作人員 1.060903
    ## 29                                       營建工程-專業人員 1.060715
    ## 30                      出版、影音製作、傳播及資通訊服務業 1.060594
    ## 31                               運輸及倉儲業-事務支援人員 1.060240
    ## 32                                   藝術_娛樂及休閒服務業 1.059809
    ## 33                           醫療保健業-服務及銷售工作人員 1.057476
    ## 34                           其他服務業-服務及銷售工作人員 1.056991
    ## 35                                   營建工程-事務支援人員 1.056960
    ## 36                          藝術_娛樂及休閒服務業-專業人員 1.056576
    ## 37                                            運輸及倉儲業 1.056260
    ## 38       藝術_娛樂及休閒服務業-技藝_機械設備操作及組裝人員 1.055985
    ## 39                             製造業-技術員及助理專業人員 1.055015
    ## 40                         運輸及倉儲業-服務及銷售工作人員 1.054221
    ## 41                                            金融及保險業 1.053951
    ## 42                               工業-技術員及助理專業人員 1.053411
    ## 43                                   不動產業-事務支援人員 1.053410
    ## 44                                   金融及保險業-專業人員 1.052928
    ## 45                         批發及零售業-服務及銷售工作人員 1.052818
    ## 46                                         製造業-專業人員 1.052507
    ## 47   出版、影音製作、傳播及資通訊服務業-服務及銷售工作人員 1.052499
    ## 48 出版、影音製作、傳播及資通訊服務業-技術員及助理專業人員 1.052421
    ## 49                                           工業-專業人員 1.052347
    ## 50                                    用水供應及污染整治業 1.051960
    ## 51              藝術_娛樂及休閒服務業-技術員及助理專業人員 1.051427
    ## 52                                                營建工程 1.050670
    ## 53                        工業-技藝_機械設備操作及組裝人員 1.050328

### 主要的職業種別是哪些種類呢?

這裡需要用到Ans\_1\_b，也就是上一題的資料<br> 取出Ans\_1\_b大職業別中“-” 前面的字串(主要的職業種別)<br>
strsplit可以把-前後的字串拆開，而我們需要用到的只有-前的字串而已

``` r
head(strsplit (Ans_1_b$大職業別,"-"))
```

    ## [[1]]
    ## [1] "專業_科學及技術服務業" "服務及銷售工作人員"   
    ## 
    ## [[2]]
    ## [1] "教育業"             "服務及銷售工作人員"
    ## 
    ## [[3]]
    ## [1] "不動產業"             "技術員及助理專業人員"
    ## 
    ## [[4]]
    ## [1] "住宿及餐飲業"       "服務及銷售工作人員"
    ## 
    ## [[5]]
    ## [1] "藝術_娛樂及休閒服務業" "事務支援人員"         
    ## 
    ## [[6]]
    ## [1] "金融及保險業"                "技藝_機械設備操作及組裝人員"

使用sapply可以正確取出想要的字串<br> **R Learning Notes: Parsing
(字串處理）**-<https://medium.com/@kevinhsu_83500/r-learning-notes-parsing-%E5%AD%97%E4%B8%B2%E8%99%95%E7%90%86-587264518581>

``` r
Ans_1_c <- table(sapply( (strsplit (Ans_1_b$大職業別,"-") ), "[" ,  1))
knitr::kable(sort(Ans_1_c, decreasing = T))
```

| Var1              | Freq |
| :---------------- | ---: |
| 不動產業              |    5 |
| 出版、影音製作、傳播及資通訊服務業 |    5 |
| 金融及保險業            |    5 |
| 運輸及倉儲業            |    5 |
| 藝術\_娛樂及休閒服務業      |    5 |
| 住宿及餐飲業            |    4 |
| 教育業               |    4 |
| 營建工程              |    4 |
| 工業                |    3 |
| 用水供應及污染整治業        |    3 |
| 製造業               |    2 |
| 工業及服務業            |    1 |
| 支援服務業             |    1 |
| 批發及零售業            |    1 |
| 其他服務業             |    1 |
| 服務業               |    1 |
| 專業\_科學及技術服務業      |    1 |
| 電力及燃氣供應業          |    1 |
| 醫療保健業             |    1 |

### Ans\_1結論

幾乎所有職業107年度薪資都比104年度薪資高，其中1、2名都是服務及銷售工作人員，我猜應該跟基本薪資的提高有些許關係。<br>
而大職業別中，大部分都提升超過5%。前五名出現的次數甚至一樣。但是這其中的關聯性不強。不過倒數幾名倒是有一致的共通性–服務業。看來服務業的薪資成長不是十分理想，如果汶萊找工作，服務業只能當臨時打工而非終身選擇。

# 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為104到107年度的大學畢業薪資。

### Ans\_2資料整合

select取出`大職業別`,`大學-女/男.104`, `大學-女/男.107`三個欄位<br>
subset會把104、107年大學畢業男女薪資比例中的“-”拿掉<br>
mutate將上述的資料型態轉成數值

``` r
Ans_2 <- S_total%>%
  select(`大職業別`,`大學-女/男.104`, `大學-女/男.107`)%>%
  subset(`大學-女/男.107` != "—")%>%
  subset(`大學-女/男.104` != "—")%>%
  mutate(`大學-女/男.107` = as.numeric(`大學-女/男.107`),
         `大學-女/男.104` = as.numeric(`大學-女/男.104`))
```

### 104和107年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

依照差異大小由大到小排序(100代表薪資相同，100以下男生多於女生)

``` r
#104年
Ans_2_a_104 <- Ans_2%>%
  filter(`大學-女/男.104`<100) %>%
  select(`大職業別`,`大學-女/男.104`)%>%
  arrange(`大學-女/男.104`)

knitr::kable(head(Ans_2_a_104,10))
```

| 大職業別                       | 大學-女/男.104 |
| :------------------------- | :--------: |
| 電力及燃氣供應業-技藝\_機械設備操作及組裝人員   |   91.69    |
| 教育業-服務及銷售工作人員              |   91.90    |
| 礦業及土石採取業-技術員及助理專業人員        |   92.42    |
| 礦業及土石採取業-技藝\_機械設備操作及組裝人員   |   93.10    |
| 礦業及土石採取業                   |   95.28    |
| 其他服務業-事務支援人員               |   95.47    |
| 營建工程-技藝\_機械設備操作及組裝人員       |   95.64    |
| 用水供應及污染整治業-技藝\_機械設備操作及組裝人員 |   95.90    |
| 營建工程                       |   96.35    |
| 教育業                        |   96.44    |

``` r
#107年
Ans_2_a_107 <- Ans_2%>%
  filter(`大學-女/男.107`<100) %>%
  select(`大職業別`,`大學-女/男.107`)%>%
  arrange(`大學-女/男.107`)

knitr::kable(head(Ans_2_a_107,10))
```

| 大職業別                 | 大學-女/男.107 |
| :------------------- | :--------: |
| 礦業及土石採取業-專業人員        |   96.02    |
| 電力及燃氣供應業-事務支援人員      |   96.96    |
| 礦業及土石採取業             |   97.11    |
| 營建工程                 |   97.52    |
| 教育業-事務支援人員           |   97.61    |
| 營建工程-技術員及助理專業人員      |   97.78    |
| 用水供應及污染整治業-專業人員      |   97.81    |
| 用水供應及污染整治業-服務及銷售工作人員 |   97.94    |
| 電力及燃氣供應業-專業人員        |   98.23    |
| 營建工程-事務支援人員          |   98.23    |

### 哪些行業女生薪資比男生薪資多?

依照差異大小由大到小排序(100代表薪資相同，100以上女生多於男生)

``` r
#104年
Ans_2_b_104 <- Ans_2%>%
  filter(`大學-女/男.104`>100) %>%
  select(`大職業別`,`大學-女/男.104`)%>%
  arrange(desc(`大學-女/男.104`))

knitr::kable(head(Ans_2_b_104))
```

| 大職業別                         | 大學-女/男.104 |
| :--------------------------- | :--------: |
| 專業\_科學及技術服務業-技藝\_機械設備操作及組裝人員 |   100.26   |

``` r
#107年
Ans_2_b_107 <- Ans_2%>%
  filter(`大學-女/男.107`>100) %>%
  select(`大職業別`,`大學-女/男.107`)%>%
  arrange(desc(`大學-女/男.107`))

knitr::kable(head(Ans_2_b_107))
```

| 大職業別 | 大學-女/男.107 |
| :--- | ---------: |

### Ans\_2結論

不論是104年還是107年，男性薪資普遍都比女性高。這現象對需要體力的工作來說， 更加明顯(或許雇主認為男性在這方面付出肯定多於女生)<br>
而女性唯一有機會比男性高薪資的專業工作(專業\_科學及技術服務業-技藝)，也在107年宣告失敗。甚至107年女性完全沒有一項職業，薪水勝過男性<br>
不過值得慶幸的是，從104到107年男女薪資的差異越來越小了。以我的觀點來看，這改變比起嚴重的兩極化(粗活男性薪資高出許多、專業活則是女性薪資高出許多)還要更加值得鼓勵、期許。

# 研究所薪資差異

以107年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
Ans_3 <- S_total%>%
  select(`大職業別`,`大學-薪資.107`,`研究所-薪資.107`)%>%
  subset(`大學-薪資.107` != "—")%>%
  subset(`研究所-薪資.107` != "—")%>%
  mutate(`大學-薪資.107` = as.numeric(`大學-薪資.107`),
         `研究所-薪資.107` = as.numeric(`研究所-薪資.107`),
         `成長率` = `研究所-薪資.107`/`大學-薪資.107`)%>%
  arrange(desc(`成長率`))

knitr::kable(head(Ans_3))
```

| 大職業別              | 大學-薪資.107 | 研究所-薪資.107 |   成長率    |
| :---------------- | :-------: | :--------: | :------: |
| 其他服務業             |   25781   |   31909    | 1.237694 |
| 專業\_科學及技術服務業      |   29353   |   35381    | 1.205362 |
| 專業\_科學及技術服務業-專業人員 |   32460   |   39103    | 1.204652 |
| 教育業-事務支援人員        |   25908   |   30827    | 1.189864 |
| 出版、影音製作、傳播及資通訊服務業 |   29143   |   34503    | 1.183921 |
| 其他服務業-事務支援人員      |   26115   |   30830    | 1.180548 |

## 研究所薪資差異(除去其他)

由於上述資料的`其他`包含太多不確定因素，所以可以考慮刪掉<br> grep(“條件”, 資料, 其他篩選條件)<br>
value=F回傳資料所在位置<br> -grep則是找不符條件的資料

``` r
Ans_3_a <- Ans_3[-grep("其他+",Ans_3$大職業別,value=F), ]

knitr::kable(head(Ans_3_a))
```

|   | 大職業別                   | 大學-薪資.107 | 研究所-薪資.107 |   成長率    |
| - | :--------------------- | :-------: | :--------: | :------: |
| 2 | 專業\_科學及技術服務業           |   29353   |   35381    | 1.205362 |
| 3 | 專業\_科學及技術服務業-專業人員      |   32460   |   39103    | 1.204652 |
| 4 | 教育業-事務支援人員             |   25908   |   30827    | 1.189864 |
| 5 | 出版、影音製作、傳播及資通訊服務業      |   29143   |   34503    | 1.183921 |
| 7 | 出版、影音製作、傳播及資通訊服務業-專業人員 |   31763   |   37479    | 1.179958 |
| 8 | 製造業                    |   28777   |   33916    | 1.178580 |

### Ans\_3結論

不出我所料，科學方面的專業有繼續學，薪水方面也會跟著提高。而出版、影音製作、傳播及資通訊服務業的範圍太廣，我不確定是什麼導致學歷上升薪水也跟著上升。<br>
不過回去看第一題的結果，我發現“出版、影音製作、傳播及資通訊服務業”104\~107年是成長率超過5%數量最多的其中一個。再加上這題可以發現這個產業不論是成長率或研究所薪資差異都是上升的。<br>
從這方面來說，“出版、影音製作、傳播及資通訊服務業”應該能稱得上最有前途的大職業別了\!

# 我有興趣的職業別薪資狀況分析

資訊相關產業

### 有興趣的職業別篩選，呈現薪資

``` r
Ans_4 <- S_total%>%
  select(`大職業別`,`大學-薪資.107`,`研究所-薪資.107`)%>%
  subset(`大學-薪資.107` != "—")%>%
  subset(`研究所-薪資.107` != "—")%>%
  mutate(`大學-薪資.107` = as.numeric(`大學-薪資.107`),
         `研究所-薪資.107` = as.numeric(`研究所-薪資.107`))

Ans_4_a <- Ans_4[grep("資+",Ans_4$大職業別,value=F), ]
knitr::kable(Ans_4_a)
```

|    | 大職業別                         | 大學-薪資.107 | 研究所-薪資.107 |
| -- | :--------------------------- | :-------: | :--------: |
| 17 | 出版、影音製作、傳播及資通訊服務業            |   29143   |   34503    |
| 18 | 出版、影音製作、傳播及資通訊服務業-技術員及助理專業人員 |   28910   |   33643    |
| 19 | 出版、影音製作、傳播及資通訊服務業-事務支援人員     |   27464   |   30950    |
| 20 | 出版、影音製作、傳播及資通訊服務業-專業人員       |   31763   |   37479    |

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
Ans_4_b <- Ans_4_a%>%
  mutate(`薪資差` = `研究所-薪資.107`-`大學-薪資.107`)

knitr::kable(Ans_4_b)
```

| 大職業別                         | 大學-薪資.107 | 研究所-薪資.107 | 薪資差  |
| :--------------------------- | :-------: | :--------: | :--: |
| 出版、影音製作、傳播及資通訊服務業            |   29143   |   34503    | 5360 |
| 出版、影音製作、傳播及資通訊服務業-技術員及助理專業人員 |   28910   |   33643    | 4733 |
| 出版、影音製作、傳播及資通訊服務業-事務支援人員     |   27464   |   30950    | 3486 |
| 出版、影音製作、傳播及資通訊服務業-專業人員       |   31763   |   37479    | 5716 |

### Ans\_4結論

這資料表中有資訊參考的row太少，只有“出版、影音製作、傳播及資通訊服務業”。而這個row感覺混的資料又太雜，因此我覺得參考性不強。<br>
對於資料表中的薪資我認為是偏低的，畢竟我對於大學畢業後找工作的期望大概位於4萬多。不過對剛出社會的學生來說，或許抱著“我要進去實習”、“有工作比無業好”這類心態的人更多。所以薪水偏低這件事我可以理解。<br>
我不會因為這個份調查而改變心意。我對於資訊業的理解是，與其在學校學更多基礎知識，不如趕快出社會了解目前資訊產業所缺少的人才，並且為了成為這種人而努力。
